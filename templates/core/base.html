{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8" />
	<title>Q&A Platform</title>
	<link rel="stylesheet" href="{% static 'css/styles.css' %}">
	<link rel="icon" type="image/x-icon" href="{% static 'favicon.ico' %}">
</head>
<body>
<header>
	<nav class="top-bar">
		<div class="container" id="top-bar-container">
			<a href="{% url 'questions-list' %}" class="top-bar-logo" aria-label="Home">
				<strong>Q&A Platform</strong>
			</a>

			<ul class="top-bar-links">
				{% if request.user.is_authenticated %}
					<li><a href="{% url 'question_create' %}">Ask Question</a></li>
					<li><a href="{% url 'profile-details' user.pk %}">Profile</a></li>
					<li><a href="{% url 'logout-confirm' %}">Log Out</a></li>
				{% else %}
					<li><a href="{% url 'login' %}">Log In</a></li>
					<li><a href="{% url 'register' %}">Sign Up</a></li>
				{% endif %}
			</ul>
		</div>
	</nav>
</header>
{% block content %}
{% endblock %}
<footer class="footer">
	<div class="container">
		<div class="footer-copy">
			&copy; {{ year }} Your Q&amp;A Platform. All rights reserved.
		</div>
	</div>
</footer>


<script>
	document.addEventListener('DOMContentLoaded', function() {
		const firstError = document.querySelector('.has-error input, .has-error textarea, .has-error select, input.has-error, textarea.has-error, select.has-error');
		if (firstError) {
			const tag = firstError.tagName;
			const type = firstError.type;

			const canSetCaret =
				(tag === 'TEXTAREA') ||
				(tag === 'INPUT' && ['text', 'email', 'search', 'password', 'url', 'tel'].includes(type));

			if (canSetCaret) {
				const val = firstError.value;

				// Blur first to reset the caret position
				firstError.blur();

				setTimeout(() => {
					firstError.focus();

					// Reset value before setting caret (forces browser to recognize caret)
					firstError.value = '';
					firstError.value = val;

					try {
						firstError.setSelectionRange(val.length, val.length);
					} catch (e) {
						// Some types may still throw errors; safe to ignore
					}

					// Scroll into view after focus and caret set
					firstError.scrollIntoView({ behavior: "smooth", block: "center" });

				}, 50); // 50ms delay for browser internal focus handling
			} else {
				// For unsupported inputs or selects, just focus and scroll
				firstError.focus();
				firstError.scrollIntoView({ behavior: "smooth", block: "center" });
			}
		}
	});

</script>


</body>
</html>
