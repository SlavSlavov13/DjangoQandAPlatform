{% extends 'core/base.html' %}

{% block content %}
	<main class="form-container">
		<article class="form-article">

			{% if answer_id %}
				{% if not exists %}
					<h2>Add Comment to Answer: {{ answer_excerpt|default:"(No preview available)"|truncatechars:120 }} <br> to <br> Question: {{ question_title }}
					</h2>
				{% else %}
					<h2>Edit Comment to Answer: {{ answer_excerpt|default:"(No preview available)"|truncatechars:120 }} <br> to <br> Question: {{ question_title }}
					</h2>
				{% endif %}
			{% else %}
				{% if not exists %}
					<h2>Add Comment to Question: "{{ question_title }}"</h2>
				{% else %}
					<h2>Edit Comment to Question: "{{ question_title }}"</h2>
				{% endif %}
			{% endif %}

			<form method="post" class="site-form">
				{% csrf_token %}

				{# Render the comment field (usually a textarea) #}
				{{ form.content }}
				{% if form.content.help_text %}
					<small class="help-text">{{ form.content.help_text }}</small>
				{% endif %}

				{# Show form-level errors #}
				{% if form.errors %}
					<div class="error-message">
						{% for field in form %}
							{% for error in field.errors %}
								{{ error }}<br>
							{% endfor %}
						{% endfor %}
						{% for error in form.non_field_errors %}
							{{ error }}<br>
						{% endfor %}
					</div>
				{% endif %}

				{% if not exists %}
					<button type="submit" class="btn btn-edit">Post Comment</button>
				{% else %}
					<button type="submit" class="btn btn-edit">Edit Comment</button>
				{% endif %}
				<a href="#" onclick="window.history.back(); return false;" class="btn btn-answer">Cancel</a>
			</form>
		</article>
	</main>
{% endblock %}
